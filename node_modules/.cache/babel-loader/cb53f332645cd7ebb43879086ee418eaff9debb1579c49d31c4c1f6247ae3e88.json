{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Swapnil/Desktop/blog/blogweb/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"C:/Users/Swapnil/Desktop/blog/blogweb/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/Swapnil/Desktop/blog/blogweb/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Swapnil/Desktop/blog/blogweb/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{getDocs,collection,deleteDoc,doc}from\"firebase/firestore\";import{auth,db}from\"../firebase-config\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Home(_ref){var isAuth=_ref.isAuth;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),postLists=_useState2[0],setPostList=_useState2[1];var postsCollectionRef=collection(db,\"posts\");useEffect(function(){var getPosts=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return getDocs(postsCollectionRef);case 2:data=_context.sent;setPostList(data.docs.map(function(doc){return _objectSpread(_objectSpread({},doc.data()),{},{id:doc.id});}));case 4:case\"end\":return _context.stop();}},_callee);}));return function getPosts(){return _ref2.apply(this,arguments);};}();getPosts();},[]);var deletePost=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(id){var postDoc;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:postDoc=doc(db,\"posts\",id);_context2.next=3;return deleteDoc(postDoc);case 3:case\"end\":return _context2.stop();}},_callee2);}));return function deletePost(_x){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"homePage\",children:postLists.map(function(post){return/*#__PURE__*/_jsxs(\"div\",{className:\"post\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"postHeader\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"title\",children:[\" \",/*#__PURE__*/_jsx(\"h1\",{children:post.title})]}),/*#__PURE__*/_jsx(\"div\",{className:\"deletePost\",children:isAuth&&post.author.id===auth.currentUser.uid&&/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){deletePost(post.id);},children:\"\\uD83D\\uDDD1\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"postTextContainer\",children:post.postText}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"@\",post.author.name]})]});})});}export default Home;","map":{"version":3,"names":["React","useEffect","useState","getDocs","collection","deleteDoc","doc","auth","db","jsx","_jsx","jsxs","_jsxs","Home","_ref","isAuth","_useState","_useState2","_slicedToArray","postLists","setPostList","postsCollectionRef","getPosts","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","data","wrap","_callee$","_context","prev","next","sent","docs","map","_objectSpread","id","stop","apply","arguments","deletePost","_ref3","_callee2","postDoc","_callee2$","_context2","_x","className","children","post","title","author","currentUser","uid","onClick","postText","name"],"sources":["C:/Users/Swapnil/Desktop/blog/blogweb/src/pages/Home.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { getDocs, collection, deleteDoc, doc } from \"firebase/firestore\";\r\nimport { auth, db } from \"../firebase-config\";\r\n\r\nfunction Home({ isAuth }) {\r\n  const [postLists, setPostList] = useState([]);\r\n  const postsCollectionRef = collection(db, \"posts\");\r\n\r\n  useEffect(() => {\r\n    const getPosts = async () => {\r\n      const data = await getDocs(postsCollectionRef);\r\n      setPostList(data.docs.map((doc) => ({ ...doc.data(), id: doc.id })));\r\n    };\r\n\r\n    getPosts();\r\n  },[]);\r\n\r\n  const deletePost = async (id) => {\r\n    const postDoc = doc(db,\"posts\",id)\r\n    await deleteDoc(postDoc);\r\n  }\r\n\r\n  return (\r\n    <div className=\"homePage\">\r\n      {postLists.map((post) => {\r\n        return (\r\n        <div className=\"post\">\r\n         \r\n          <div className=\"postHeader\">\r\n            <div className=\"title\"> <h1>{post.title}</h1></div> \r\n\r\n            <div className=\"deletePost\">\r\n                {isAuth && post.author.id === auth.currentUser.uid && (\r\n                  <button\r\n                    onClick={() => {\r\n                      deletePost(post.id);\r\n                    }}\r\n                  >\r\n  \r\n                    &#128465;\r\n                  </button>\r\n                )}\r\n              </div>\r\n             </div>\r\n             <div className=\"postTextContainer\">{post.postText}</div>\r\n             <h3>@{post.author.name}</h3>\r\n        </div>\r\n        );\r\n      })}\r\n           \r\n      </div>\r\n  );\r\n}\r\n\r\nexport default Home;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}